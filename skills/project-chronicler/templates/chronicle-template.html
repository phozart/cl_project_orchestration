<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Project Chronicle: {{PROJECT_NAME}}</title>
  <meta name="generator" content="project-chronicler">
  <meta name="generated" content="{{GENERATION_DATE}}">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=IBM+Plex+Sans:wght@400;500;600&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

  <!-- Mermaid.js for diagrams -->
  <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>

  <style>
    /* ========================================
       CSS CUSTOM PROPERTIES
       ======================================== */
    :root {
      /* Dark theme (default) */
      --bg-void: #030712;
      --bg-primary: #0f172a;
      --bg-secondary: #1e293b;
      --bg-tertiary: #334155;
      --bg-elevated: #475569;

      --text-primary: #f1f5f9;
      --text-secondary: #94a3b8;
      --text-muted: #64748b;
      --text-inverse: #0f172a;

      --accent-blue: #3b82f6;
      --accent-blue-dim: #1d4ed8;
      --accent-success: #22c55e;
      --accent-success-dim: #16a34a;
      --accent-warning: #f59e0b;
      --accent-warning-dim: #d97706;
      --accent-error: #ef4444;
      --accent-error-dim: #dc2626;
      --accent-purple: #8b5cf6;
      --accent-purple-dim: #7c3aed;
      --accent-cyan: #06b6d4;
      --accent-pink: #ec4899;
      --accent-orange: #f97316;

      --border-color: #334155;
      --border-subtle: #1e293b;

      --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.3);
      --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.4);
      --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.5);

      /* Typography */
      --font-display: 'Space Grotesk', system-ui, sans-serif;
      --font-body: 'IBM Plex Sans', system-ui, sans-serif;
      --font-mono: 'JetBrains Mono', ui-monospace, monospace;

      /* Spacing */
      --space-xs: 0.25rem;
      --space-sm: 0.5rem;
      --space-md: 1rem;
      --space-lg: 1.5rem;
      --space-xl: 2rem;
      --space-2xl: 3rem;

      /* Layout */
      --sidebar-width: 280px;
      --header-height: 64px;

      /* Border radius */
      --radius-sm: 4px;
      --radius-md: 8px;
      --radius-lg: 12px;
      --radius-full: 9999px;

      /* Transitions */
      --transition-fast: 150ms ease;
      --transition-normal: 250ms ease;
    }

    [data-theme="light"] {
      --bg-void: #f8fafc;
      --bg-primary: #ffffff;
      --bg-secondary: #f1f5f9;
      --bg-tertiary: #e2e8f0;
      --bg-elevated: #cbd5e1;

      --text-primary: #0f172a;
      --text-secondary: #475569;
      --text-muted: #64748b;
      --text-inverse: #f1f5f9;

      --border-color: #cbd5e1;
      --border-subtle: #e2e8f0;

      --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
      --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1);
      --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
    }

    /* ========================================
       BASE STYLES
       ======================================== */
    *, *::before, *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html {
      scroll-behavior: smooth;
      font-size: 16px;
    }

    body {
      font-family: var(--font-body);
      background: var(--bg-void);
      color: var(--text-primary);
      line-height: 1.6;
      min-height: 100vh;
    }

    /* ========================================
       LAYOUT: SIDEBAR + MAIN
       ======================================== */
    .chronicle-layout {
      display: flex;
      min-height: 100vh;
    }

    /* ========================================
       SIDEBAR
       ======================================== */
    .chronicle-sidebar {
      width: var(--sidebar-width);
      background: var(--bg-primary);
      border-right: 1px solid var(--border-subtle);
      position: fixed;
      top: 0;
      left: 0;
      height: 100vh;
      overflow-y: auto;
      z-index: 100;
      display: flex;
      flex-direction: column;
    }

    .sidebar-header {
      padding: var(--space-lg);
      border-bottom: 1px solid var(--border-subtle);
      background: linear-gradient(180deg, var(--bg-secondary) 0%, var(--bg-primary) 100%);
    }

    .sidebar-logo {
      display: flex;
      align-items: center;
      gap: var(--space-sm);
      font-family: var(--font-display);
      font-size: 0.875rem;
      color: var(--text-muted);
      margin-bottom: var(--space-sm);
    }

    .sidebar-title {
      font-family: var(--font-display);
      font-size: 1.25rem;
      font-weight: 700;
      color: var(--text-primary);
      line-height: 1.3;
    }

    .sidebar-meta {
      display: flex;
      gap: var(--space-sm);
      margin-top: var(--space-sm);
    }

    .sidebar-nav {
      flex: 1;
      padding: var(--space-md) 0;
      overflow-y: auto;
    }

    .nav-section {
      margin-bottom: var(--space-md);
    }

    .nav-section-title {
      font-family: var(--font-display);
      font-size: 0.625rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--text-muted);
      padding: var(--space-sm) var(--space-lg);
    }

    .nav-item {
      display: flex;
      align-items: center;
      gap: var(--space-sm);
      padding: var(--space-sm) var(--space-lg);
      font-size: 0.875rem;
      color: var(--text-secondary);
      text-decoration: none;
      border-left: 3px solid transparent;
      transition: all var(--transition-fast);
    }

    .nav-item:hover {
      background: var(--bg-secondary);
      color: var(--text-primary);
    }

    .nav-item.active {
      background: var(--bg-secondary);
      color: var(--accent-blue);
      border-left-color: var(--accent-blue);
      font-weight: 500;
    }

    .nav-item-icon {
      width: 20px;
      text-align: center;
      font-size: 0.875rem;
    }

    .nav-item-badge {
      margin-left: auto;
      font-family: var(--font-mono);
      font-size: 0.625rem;
      padding: 2px 6px;
      border-radius: var(--radius-sm);
      background: var(--bg-tertiary);
      color: var(--text-muted);
    }

    .nav-item-badge--success {
      background: var(--accent-success-dim);
      color: var(--accent-success);
    }

    .nav-item-badge--warning {
      background: var(--accent-warning-dim);
      color: var(--accent-warning);
    }

    .sidebar-footer {
      padding: var(--space-md) var(--space-lg);
      border-top: 1px solid var(--border-subtle);
      display: flex;
      gap: var(--space-sm);
    }

    /* ========================================
       MAIN CONTENT
       ======================================== */
    .chronicle-main {
      flex: 1;
      margin-left: var(--sidebar-width);
      min-height: 100vh;
    }

    .main-header {
      background: var(--bg-primary);
      border-bottom: 1px solid var(--border-subtle);
      padding: var(--space-md) var(--space-xl);
      position: sticky;
      top: 0;
      z-index: 50;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .breadcrumb {
      display: flex;
      align-items: center;
      gap: var(--space-sm);
      font-size: 0.875rem;
      color: var(--text-muted);
    }

    .breadcrumb-sep {
      color: var(--text-muted);
    }

    .breadcrumb-current {
      color: var(--text-primary);
      font-weight: 500;
    }

    .main-actions {
      display: flex;
      gap: var(--space-sm);
    }

    .main-content {
      padding: var(--space-xl);
      max-width: 1200px;
    }

    /* ========================================
       TYPOGRAPHY
       ======================================== */
    h1, h2, h3, h4, h5, h6 {
      font-family: var(--font-display);
      font-weight: 600;
      line-height: 1.3;
      color: var(--text-primary);
    }

    h1 { font-size: 2rem; letter-spacing: -0.02em; margin-bottom: var(--space-lg); }
    h2 { font-size: 1.5rem; letter-spacing: -0.01em; margin-bottom: var(--space-md); }
    h3 { font-size: 1.125rem; margin-bottom: var(--space-sm); }
    h4 { font-size: 1rem; margin-bottom: var(--space-sm); }

    p { margin-bottom: var(--space-md); color: var(--text-secondary); }

    a {
      color: var(--accent-blue);
      text-decoration: none;
      transition: color var(--transition-fast);
    }
    a:hover { color: var(--accent-purple); }

    code, .mono {
      font-family: var(--font-mono);
      font-size: 0.875em;
      background: var(--bg-tertiary);
      padding: 2px 6px;
      border-radius: var(--radius-sm);
    }

    pre {
      background: var(--bg-secondary);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-md);
      padding: var(--space-md);
      overflow-x: auto;
      margin-bottom: var(--space-md);
    }

    pre code {
      background: none;
      padding: 0;
    }

    ul, ol {
      margin-bottom: var(--space-md);
      padding-left: var(--space-xl);
      color: var(--text-secondary);
    }

    li {
      margin-bottom: var(--space-xs);
    }

    /* ========================================
       BUTTONS
       ======================================== */
    .btn {
      font-family: var(--font-display);
      font-size: 0.875rem;
      font-weight: 500;
      padding: var(--space-sm) var(--space-md);
      border-radius: var(--radius-md);
      border: 1px solid var(--border-color);
      background: var(--bg-secondary);
      color: var(--text-primary);
      cursor: pointer;
      transition: all var(--transition-fast);
      display: flex;
      align-items: center;
      gap: var(--space-xs);
    }

    .btn:hover {
      background: var(--bg-tertiary);
      border-color: var(--accent-blue);
    }

    .btn-icon {
      width: 36px;
      height: 36px;
      padding: 0;
      justify-content: center;
    }

    .btn-sm {
      font-size: 0.75rem;
      padding: var(--space-xs) var(--space-sm);
    }

    /* ========================================
       BADGES
       ======================================== */
    .badge {
      display: inline-flex;
      align-items: center;
      gap: var(--space-xs);
      padding: var(--space-xs) var(--space-sm);
      border-radius: var(--radius-full);
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.03em;
    }

    .badge--blue { background: var(--accent-blue-dim); color: var(--accent-blue); border: 1px solid var(--accent-blue); }
    .badge--success { background: var(--accent-success-dim); color: var(--accent-success); border: 1px solid var(--accent-success); }
    .badge--warning { background: var(--accent-warning-dim); color: var(--accent-warning); border: 1px solid var(--accent-warning); }
    .badge--error { background: var(--accent-error-dim); color: var(--accent-error); border: 1px solid var(--accent-error); }
    .badge--purple { background: var(--accent-purple-dim); color: var(--accent-purple); border: 1px solid var(--accent-purple); }
    .badge--muted { background: var(--bg-tertiary); color: var(--text-secondary); border: 1px solid var(--border-color); }

    /* ========================================
       SECTIONS
       ======================================== */
    .section {
      margin-bottom: var(--space-2xl);
      scroll-margin-top: 80px;
    }

    .section-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: var(--space-md);
      margin-bottom: var(--space-lg);
      padding-bottom: var(--space-md);
      border-bottom: 1px solid var(--border-subtle);
    }

    .section-title {
      display: flex;
      align-items: center;
      gap: var(--space-sm);
    }

    .section-icon {
      font-size: 1.25rem;
    }

    /* ========================================
       CARDS
       ======================================== */
    .card {
      background: var(--bg-secondary);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-lg);
      overflow: hidden;
      transition: all var(--transition-fast);
    }

    .card:hover {
      border-color: var(--border-color);
    }

    .card-header {
      padding: var(--space-md) var(--space-lg);
      background: var(--bg-tertiary);
      border-bottom: 1px solid var(--border-subtle);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: var(--space-md);
    }

    .card-title {
      font-family: var(--font-display);
      font-size: 0.875rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: var(--space-sm);
    }

    .card-body {
      padding: var(--space-lg);
    }

    .card-footer {
      padding: var(--space-md) var(--space-lg);
      background: var(--bg-tertiary);
      border-top: 1px solid var(--border-subtle);
    }

    /* ========================================
       OVERVIEW METRICS
       ======================================== */
    .metrics-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: var(--space-md);
      margin-bottom: var(--space-xl);
    }

    .metric-card {
      background: var(--bg-secondary);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-lg);
      padding: var(--space-lg);
      transition: all var(--transition-fast);
    }

    .metric-card:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-md);
    }

    .metric-label {
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--text-muted);
      margin-bottom: var(--space-sm);
    }

    .metric-value {
      font-family: var(--font-display);
      font-size: 2rem;
      font-weight: 700;
      line-height: 1;
    }

    .metric-subtext {
      font-size: 0.75rem;
      color: var(--text-muted);
      margin-top: var(--space-xs);
    }

    .metric-card--blue .metric-value { color: var(--accent-blue); }
    .metric-card--success .metric-value { color: var(--accent-success); }
    .metric-card--warning .metric-value { color: var(--accent-warning); }
    .metric-card--error .metric-value { color: var(--accent-error); }
    .metric-card--purple .metric-value { color: var(--accent-purple); }

    /* ========================================
       CONTENT BLOCKS
       ======================================== */
    .content-block {
      background: var(--bg-secondary);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-lg);
      margin-bottom: var(--space-lg);
    }

    .content-block-header {
      padding: var(--space-md) var(--space-lg);
      background: var(--bg-tertiary);
      border-bottom: 1px solid var(--border-subtle);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .content-block-header:hover {
      background: var(--bg-elevated);
    }

    .content-block-title {
      display: flex;
      align-items: center;
      gap: var(--space-sm);
    }

    .content-block-title h3 {
      margin: 0;
      font-size: 1rem;
    }

    .content-block-id {
      font-family: var(--font-mono);
      font-size: 0.75rem;
      color: var(--accent-purple);
    }

    .content-block-chevron {
      color: var(--text-muted);
      transition: transform var(--transition-fast);
    }

    .content-block.expanded .content-block-chevron {
      transform: rotate(180deg);
    }

    .content-block-body {
      padding: var(--space-lg);
      display: none;
    }

    .content-block.expanded .content-block-body {
      display: block;
    }

    .content-block.always-open .content-block-body {
      display: block;
    }

    /* Content Subsections */
    .content-subsection {
      margin-bottom: var(--space-lg);
    }

    .content-subsection:last-child {
      margin-bottom: 0;
    }

    .content-subsection-label {
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--text-muted);
      margin-bottom: var(--space-sm);
    }

    .content-subsection-text {
      color: var(--text-secondary);
      line-height: 1.7;
    }

    /* ========================================
       PERSONA CARDS
       ======================================== */
    .persona-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: var(--space-md);
    }

    .persona-card {
      background: var(--bg-secondary);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-lg);
      padding: var(--space-lg);
    }

    .persona-header {
      display: flex;
      align-items: center;
      gap: var(--space-md);
      margin-bottom: var(--space-md);
      padding-bottom: var(--space-md);
      border-bottom: 1px solid var(--border-subtle);
    }

    .persona-avatar {
      width: 48px;
      height: 48px;
      border-radius: var(--radius-full);
      background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-purple) 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
    }

    .persona-name {
      font-family: var(--font-display);
      font-weight: 600;
      font-size: 1rem;
    }

    .persona-role {
      font-size: 0.875rem;
      color: var(--text-secondary);
    }

    .persona-section {
      margin-bottom: var(--space-md);
    }

    .persona-section:last-child {
      margin-bottom: 0;
    }

    .persona-section-title {
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--text-muted);
      margin-bottom: var(--space-xs);
    }

    /* ========================================
       REQUIREMENTS TABLE
       ======================================== */
    .requirements-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.875rem;
    }

    .requirements-table th,
    .requirements-table td {
      padding: var(--space-sm) var(--space-md);
      text-align: left;
      border-bottom: 1px solid var(--border-subtle);
    }

    .requirements-table th {
      background: var(--bg-tertiary);
      font-family: var(--font-display);
      font-weight: 600;
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--text-muted);
    }

    .requirements-table tr:hover {
      background: var(--bg-tertiary);
    }

    .req-id {
      font-family: var(--font-mono);
      color: var(--accent-cyan);
      font-weight: 500;
    }

    .priority-must { color: var(--accent-error); }
    .priority-should { color: var(--accent-warning); }
    .priority-could { color: var(--accent-success); }

    /* ========================================
       USER STORIES
       ======================================== */
    .user-story {
      background: var(--bg-secondary);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-lg);
      margin-bottom: var(--space-md);
      overflow: hidden;
    }

    .user-story-header {
      padding: var(--space-md) var(--space-lg);
      background: var(--bg-tertiary);
      display: flex;
      align-items: center;
      justify-content: space-between;
      cursor: pointer;
    }

    .user-story-id {
      font-family: var(--font-mono);
      font-size: 0.875rem;
      color: var(--accent-blue);
      font-weight: 600;
    }

    .user-story-title {
      font-family: var(--font-display);
      font-weight: 500;
      margin-left: var(--space-md);
    }

    .user-story-body {
      padding: var(--space-lg);
      display: none;
    }

    .user-story.expanded .user-story-body {
      display: block;
    }

    .user-story-statement {
      background: var(--bg-tertiary);
      border-left: 3px solid var(--accent-blue);
      padding: var(--space-md);
      margin-bottom: var(--space-md);
      font-style: italic;
      color: var(--text-secondary);
    }

    .acceptance-criteria {
      margin-top: var(--space-md);
    }

    .acceptance-criteria h5 {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--text-muted);
      margin-bottom: var(--space-sm);
    }

    .acceptance-criteria ul {
      list-style: none;
      padding: 0;
    }

    .acceptance-criteria li {
      padding: var(--space-xs) 0;
      padding-left: var(--space-lg);
      position: relative;
    }

    .acceptance-criteria li::before {
      content: '[ ]';
      font-family: var(--font-mono);
      font-size: 0.75rem;
      position: absolute;
      left: 0;
      color: var(--text-muted);
    }

    /* ========================================
       ADR (Architecture Decision Records)
       ======================================== */
    .adr-card {
      background: var(--bg-secondary);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-lg);
      margin-bottom: var(--space-md);
      overflow: hidden;
    }

    .adr-header {
      padding: var(--space-md) var(--space-lg);
      display: flex;
      align-items: center;
      gap: var(--space-md);
      cursor: pointer;
      transition: background var(--transition-fast);
    }

    .adr-header:hover {
      background: var(--bg-tertiary);
    }

    .adr-id {
      font-family: var(--font-mono);
      font-size: 0.875rem;
      color: var(--accent-purple);
      font-weight: 600;
      min-width: 80px;
    }

    .adr-title {
      flex: 1;
      font-family: var(--font-display);
      font-weight: 500;
    }

    .adr-status {
      font-size: 0.75rem;
    }

    .adr-body {
      padding: var(--space-lg);
      display: none;
      border-top: 1px solid var(--border-subtle);
    }

    .adr-card.expanded .adr-body {
      display: block;
    }

    .adr-section {
      margin-bottom: var(--space-lg);
    }

    .adr-section:last-child {
      margin-bottom: 0;
    }

    .consequences-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: var(--space-md);
    }

    .consequence-box {
      padding: var(--space-md);
      border-radius: var(--radius-md);
      font-size: 0.875rem;
    }

    .consequence-box--positive {
      background: rgba(34, 197, 94, 0.1);
      border: 1px solid var(--accent-success);
    }

    .consequence-box--negative {
      background: rgba(239, 68, 68, 0.1);
      border: 1px solid var(--accent-error);
    }

    .consequence-box h5 {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-bottom: var(--space-sm);
    }

    .consequence-box--positive h5 { color: var(--accent-success); }
    .consequence-box--negative h5 { color: var(--accent-error); }

    .consequence-box ul {
      list-style: none;
      padding: 0;
      margin: 0;
      color: var(--text-secondary);
    }

    .consequence-box li {
      padding-left: var(--space-md);
      position: relative;
      margin-bottom: var(--space-xs);
    }

    .consequence-box li::before {
      content: '‚Ä¢';
      position: absolute;
      left: 0;
    }

    /* ========================================
       DESIGN SECTION
       ======================================== */
    .wireframe-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: var(--space-md);
    }

    .wireframe-card {
      background: var(--bg-secondary);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-lg);
      overflow: hidden;
    }

    .wireframe-preview {
      height: 200px;
      background: var(--bg-tertiary);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 3rem;
      color: var(--text-muted);
      border-bottom: 1px solid var(--border-subtle);
    }

    .wireframe-info {
      padding: var(--space-md);
    }

    .wireframe-name {
      font-family: var(--font-display);
      font-weight: 600;
      margin-bottom: var(--space-xs);
    }

    .wireframe-desc {
      font-size: 0.875rem;
      color: var(--text-secondary);
    }

    /* ========================================
       TIMELINE
       ======================================== */
    .timeline {
      position: relative;
      padding-left: var(--space-2xl);
    }

    .timeline::before {
      content: '';
      position: absolute;
      left: 11px;
      top: 0;
      bottom: 0;
      width: 2px;
      background: linear-gradient(180deg, var(--accent-blue) 0%, var(--accent-purple) 50%, var(--bg-tertiary) 100%);
    }

    .timeline-item {
      position: relative;
      padding-bottom: var(--space-lg);
    }

    .timeline-item:last-child {
      padding-bottom: 0;
    }

    .timeline-marker {
      position: absolute;
      left: calc(-1 * var(--space-2xl) + 4px);
      width: 16px;
      height: 16px;
      border-radius: var(--radius-full);
      background: var(--bg-primary);
      border: 3px solid var(--accent-blue);
      z-index: 1;
    }

    .timeline-marker--gate {
      width: 24px;
      height: 24px;
      left: calc(-1 * var(--space-2xl));
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.625rem;
      font-weight: 700;
    }

    .timeline-marker--passed {
      background: var(--accent-success);
      border-color: var(--accent-success);
      color: var(--text-inverse);
    }

    .timeline-marker--failed {
      background: var(--accent-error);
      border-color: var(--accent-error);
      color: var(--text-inverse);
    }

    .timeline-content {
      background: var(--bg-secondary);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-lg);
      padding: var(--space-md) var(--space-lg);
    }

    .timeline-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: var(--space-xs);
    }

    .timeline-title {
      font-family: var(--font-display);
      font-size: 0.875rem;
      font-weight: 600;
    }

    .timeline-date {
      font-family: var(--font-mono);
      font-size: 0.75rem;
      color: var(--text-muted);
    }

    .timeline-desc {
      font-size: 0.875rem;
      color: var(--text-secondary);
    }

    /* ========================================
       DIAGRAMS
       ======================================== */
    .diagram-container {
      background: var(--bg-secondary);
      border: 1px solid var(--border-subtle);
      border-radius: var(--radius-lg);
      overflow: hidden;
      margin-bottom: var(--space-lg);
    }

    .diagram-header {
      padding: var(--space-md) var(--space-lg);
      background: var(--bg-tertiary);
      border-bottom: 1px solid var(--border-subtle);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .diagram-title {
      font-family: var(--font-display);
      font-weight: 600;
      font-size: 0.875rem;
    }

    .diagram-source {
      font-family: var(--font-mono);
      font-size: 0.75rem;
      color: var(--text-muted);
    }

    .diagram-body {
      padding: var(--space-xl);
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 300px;
      overflow-x: auto;
    }

    .mermaid {
      width: 100%;
    }

    /* ========================================
       QA / DEFECTS
       ======================================== */
    .defect-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.875rem;
    }

    .defect-table th,
    .defect-table td {
      padding: var(--space-sm) var(--space-md);
      text-align: left;
      border-bottom: 1px solid var(--border-subtle);
    }

    .defect-table th {
      background: var(--bg-tertiary);
      font-family: var(--font-display);
      font-weight: 600;
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--text-muted);
    }

    .defect-id {
      font-family: var(--font-mono);
      color: var(--accent-error);
    }

    .severity-critical { color: var(--accent-error); font-weight: 600; }
    .severity-high { color: var(--accent-orange); }
    .severity-medium { color: var(--accent-warning); }
    .severity-low { color: var(--text-muted); }

    .status-open { color: var(--accent-error); }
    .status-fixed { color: var(--accent-success); }
    .status-wontfix { color: var(--text-muted); }

    /* ========================================
       FOOTER
       ======================================== */
    .chronicle-footer {
      background: var(--bg-primary);
      border-top: 1px solid var(--border-subtle);
      padding: var(--space-xl);
      margin-top: var(--space-2xl);
    }

    .footer-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: var(--space-md);
    }

    .footer-meta {
      font-size: 0.75rem;
      color: var(--text-muted);
    }

    .footer-meta span {
      margin-right: var(--space-lg);
    }

    .footer-brand {
      display: flex;
      align-items: center;
      gap: var(--space-sm);
      font-family: var(--font-display);
      font-size: 0.875rem;
      color: var(--text-secondary);
    }

    /* ========================================
       PRINT STYLES
       ======================================== */
    @media print {
      .chronicle-sidebar,
      .main-header,
      .btn {
        display: none !important;
      }

      .chronicle-main {
        margin-left: 0;
      }

      .content-block-body,
      .adr-body,
      .user-story-body {
        display: block !important;
      }

      body {
        background: white;
        color: black;
      }
    }

    /* ========================================
       RESPONSIVE
       ======================================== */
    @media (max-width: 1024px) {
      .chronicle-sidebar {
        transform: translateX(-100%);
        transition: transform var(--transition-normal);
      }

      .chronicle-sidebar.open {
        transform: translateX(0);
      }

      .chronicle-main {
        margin-left: 0;
      }

      .mobile-menu-btn {
        display: flex !important;
      }
    }

    .mobile-menu-btn {
      display: none;
    }
  </style>
</head>
<body>
  <div class="chronicle-layout">
    <!-- ========================================
         SIDEBAR
         ======================================== -->
    <aside class="chronicle-sidebar" id="sidebar">
      <div class="sidebar-header">
        <div class="sidebar-logo">
          <span>üìú</span>
          <span>Project Chronicle</span>
        </div>
        <div class="sidebar-title">{{PROJECT_NAME}}</div>
        <div class="sidebar-meta">
          <span class="badge badge--{{STATUS_COLOR}}">{{CURRENT_PHASE}}</span>
        </div>
      </div>

      <nav class="sidebar-nav">
        <!-- Overview -->
        <div class="nav-section">
          <div class="nav-section-title">Overview</div>
          <a href="#overview" class="nav-item active">
            <span class="nav-item-icon">üìä</span>
            Dashboard
          </a>
          <a href="#timeline" class="nav-item">
            <span class="nav-item-icon">üìÖ</span>
            Timeline
          </a>
        </div>

        <!-- Discovery -->
        <div class="nav-section">
          <div class="nav-section-title">Discovery</div>
          <a href="#brief" class="nav-item">
            <span class="nav-item-icon">üìã</span>
            Project Brief
          </a>
          <a href="#personas" class="nav-item">
            <span class="nav-item-icon">üë•</span>
            Personas
            <span class="nav-item-badge">{{PERSONA_COUNT}}</span>
          </a>
          <a href="#market" class="nav-item">
            <span class="nav-item-icon">üìà</span>
            Market Analysis
          </a>
        </div>

        <!-- Requirements -->
        <div class="nav-section">
          <div class="nav-section-title">Requirements</div>
          <a href="#requirements" class="nav-item">
            <span class="nav-item-icon">üìù</span>
            Requirements
            <span class="nav-item-badge">{{REQ_COUNT}}</span>
          </a>
          <a href="#user-stories" class="nav-item">
            <span class="nav-item-icon">üìñ</span>
            User Stories
            <span class="nav-item-badge">{{US_COUNT}}</span>
          </a>
        </div>

        <!-- Architecture -->
        <div class="nav-section">
          <div class="nav-section-title">Architecture</div>
          <a href="#architecture" class="nav-item">
            <span class="nav-item-icon">üèóÔ∏è</span>
            System Design
          </a>
          <a href="#decisions" class="nav-item">
            <span class="nav-item-icon">‚öñÔ∏è</span>
            Decisions (ADR)
            <span class="nav-item-badge">{{ADR_COUNT}}</span>
          </a>
          <a href="#data-model" class="nav-item">
            <span class="nav-item-icon">üóÑÔ∏è</span>
            Data Model
          </a>
          <a href="#api" class="nav-item">
            <span class="nav-item-icon">üîå</span>
            API Design
          </a>
        </div>

        <!-- Design -->
        <div class="nav-section">
          <div class="nav-section-title">Design</div>
          <a href="#user-flows" class="nav-item">
            <span class="nav-item-icon">üîÄ</span>
            User Flows
          </a>
          <a href="#wireframes" class="nav-item">
            <span class="nav-item-icon">üìê</span>
            Wireframes
          </a>
          <a href="#ui-specs" class="nav-item">
            <span class="nav-item-icon">üé®</span>
            UI Specifications
          </a>
        </div>

        <!-- Quality -->
        <div class="nav-section">
          <div class="nav-section-title">Quality</div>
          <a href="#test-plan" class="nav-item">
            <span class="nav-item-icon">üß™</span>
            Test Plan
          </a>
          <a href="#defects" class="nav-item">
            <span class="nav-item-icon">üêõ</span>
            Defects
            <span class="nav-item-badge nav-item-badge--warning">{{OPEN_DEFECTS}}</span>
          </a>
          <a href="#security" class="nav-item">
            <span class="nav-item-icon">üîí</span>
            Security Review
          </a>
          <a href="#bat" class="nav-item">
            <span class="nav-item-icon">‚úÖ</span>
            Acceptance Testing
          </a>
        </div>

        <!-- Metrics -->
        <div class="nav-section">
          <div class="nav-section-title">Metrics</div>
          <a href="#gates" class="nav-item">
            <span class="nav-item-icon">üö¶</span>
            Quality Gates
            <span class="nav-item-badge nav-item-badge--success">{{GATES_PASSED}}/{{TOTAL_GATES}}</span>
          </a>
        </div>
      </nav>

      <div class="sidebar-footer">
        <button class="btn btn-sm btn-icon" id="theme-toggle" title="Toggle theme">
          <span id="theme-icon">üåô</span>
        </button>
        <button class="btn btn-sm btn-icon" onclick="window.print()" title="Print">
          üñ®Ô∏è
        </button>
      </div>
    </aside>

    <!-- ========================================
         MAIN CONTENT
         ======================================== -->
    <main class="chronicle-main">
      <header class="main-header">
        <button class="btn btn-icon mobile-menu-btn" onclick="toggleSidebar()">‚ò∞</button>
        <div class="breadcrumb">
          <span>Chronicle</span>
          <span class="breadcrumb-sep">/</span>
          <span class="breadcrumb-current" id="current-section">Dashboard</span>
        </div>
        <div class="main-actions">
          <span class="badge badge--muted">Generated: {{GENERATION_DATE}}</span>
        </div>
      </header>

      <div class="main-content">

        <!-- ==================== OVERVIEW ==================== -->
        <section id="overview" class="section">
          <div class="section-header">
            <div class="section-title">
              <span class="section-icon">üìä</span>
              <h1>Project Dashboard</h1>
            </div>
          </div>

          <div class="metrics-grid">
            <div class="metric-card metric-card--blue">
              <div class="metric-label">Current Phase</div>
              <div class="metric-value">{{PHASE_NUMBER}}</div>
              <div class="metric-subtext">of {{TOTAL_PHASES}} phases</div>
            </div>
            <div class="metric-card metric-card--success">
              <div class="metric-label">Gates Passed</div>
              <div class="metric-value">{{GATES_PASSED}}</div>
              <div class="metric-subtext">of {{TOTAL_GATES}} gates</div>
            </div>
            <div class="metric-card">
              <div class="metric-label">Days Elapsed</div>
              <div class="metric-value">{{DAYS_ELAPSED}}</div>
              <div class="metric-subtext">since {{START_DATE}}</div>
            </div>
            <div class="metric-card metric-card--purple">
              <div class="metric-label">Requirements</div>
              <div class="metric-value">{{REQ_COUNT}}</div>
              <div class="metric-subtext">documented</div>
            </div>
            <div class="metric-card">
              <div class="metric-label">User Stories</div>
              <div class="metric-value">{{US_COUNT}}</div>
              <div class="metric-subtext">defined</div>
            </div>
            <div class="metric-card metric-card--warning">
              <div class="metric-label">Open Defects</div>
              <div class="metric-value">{{OPEN_DEFECTS}}</div>
              <div class="metric-subtext">to resolve</div>
            </div>
          </div>

          <!-- Quick Summary -->
          <div class="card">
            <div class="card-header">
              <span class="card-title">üìã Executive Summary</span>
            </div>
            <div class="card-body">
              <div class="content-subsection">
                <div class="content-subsection-label">Problem Statement</div>
                <div class="content-subsection-text">{{PROBLEM_STATEMENT}}</div>
              </div>
              <div class="content-subsection">
                <div class="content-subsection-label">Solution</div>
                <div class="content-subsection-text">{{SOLUTION_SUMMARY}}</div>
              </div>
            </div>
          </div>
        </section>

        <!-- ==================== TIMELINE ==================== -->
        <section id="timeline" class="section">
          <div class="section-header">
            <div class="section-title">
              <span class="section-icon">üìÖ</span>
              <h2>Project Timeline</h2>
            </div>
          </div>

          <div class="timeline">
            {{TIMELINE_ITEMS}}
          </div>
        </section>

        <!-- ==================== PROJECT BRIEF ==================== -->
        <section id="brief" class="section">
          <div class="section-header">
            <div class="section-title">
              <span class="section-icon">üìã</span>
              <h2>Project Brief</h2>
            </div>
            <span class="badge badge--muted">From: Product Strategist</span>
          </div>

          <div class="content-block always-open">
            <div class="content-block-body">
              <div class="content-subsection">
                <div class="content-subsection-label">Problem Statement</div>
                <div class="content-subsection-text">{{PROBLEM_STATEMENT}}</div>
              </div>
              <div class="content-subsection">
                <div class="content-subsection-label">Target Users</div>
                <div class="content-subsection-text">{{TARGET_USERS}}</div>
              </div>
              <div class="content-subsection">
                <div class="content-subsection-label">Scope</div>
                <div class="content-subsection-text">{{PROJECT_SCOPE}}</div>
              </div>
              <div class="content-subsection">
                <div class="content-subsection-label">Constraints</div>
                <div class="content-subsection-text">{{CONSTRAINTS}}</div>
              </div>
              <div class="content-subsection">
                <div class="content-subsection-label">Success Metrics</div>
                <div class="content-subsection-text">{{SUCCESS_METRICS}}</div>
              </div>
            </div>
          </div>
        </section>

        <!-- ==================== PERSONAS ==================== -->
        <section id="personas" class="section">
          <div class="section-header">
            <div class="section-title">
              <span class="section-icon">üë•</span>
              <h2>User Personas</h2>
            </div>
            <span class="badge badge--muted">From: UX Researcher</span>
          </div>

          <div class="persona-grid">
            {{PERSONA_CARDS}}
          </div>
        </section>

        <!-- ==================== MARKET ANALYSIS ==================== -->
        <section id="market" class="section">
          <div class="section-header">
            <div class="section-title">
              <span class="section-icon">üìà</span>
              <h2>Market Analysis</h2>
            </div>
            <span class="badge badge--muted">From: Product Strategist</span>
          </div>

          <div class="content-block always-open">
            <div class="content-block-body">
              <div class="content-subsection">
                <div class="content-subsection-label">Market Size (TAM/SAM/SOM)</div>
                <div class="content-subsection-text">{{MARKET_SIZE}}</div>
              </div>
              <div class="content-subsection">
                <div class="content-subsection-label">Competitive Landscape</div>
                <div class="content-subsection-text">{{COMPETITIVE_ANALYSIS}}</div>
              </div>
              <div class="content-subsection">
                <div class="content-subsection-label">Value Proposition</div>
                <div class="content-subsection-text">{{VALUE_PROPOSITION}}</div>
              </div>
            </div>
          </div>
        </section>

        <!-- ==================== REQUIREMENTS ==================== -->
        <section id="requirements" class="section">
          <div class="section-header">
            <div class="section-title">
              <span class="section-icon">üìù</span>
              <h2>Requirements Catalogue</h2>
            </div>
            <span class="badge badge--muted">From: Business Analyst</span>
          </div>

          <div class="card">
            <div class="card-body" style="overflow-x: auto;">
              <table class="requirements-table">
                <thead>
                  <tr>
                    <th>ID</th>
                    <th>Requirement</th>
                    <th>Priority</th>
                    <th>Status</th>
                    <th>Acceptance Criteria</th>
                  </tr>
                </thead>
                <tbody>
                  {{REQUIREMENTS_ROWS}}
                </tbody>
              </table>
            </div>
          </div>
        </section>

        <!-- ==================== USER STORIES ==================== -->
        <section id="user-stories" class="section">
          <div class="section-header">
            <div class="section-title">
              <span class="section-icon">üìñ</span>
              <h2>User Stories</h2>
            </div>
            <span class="badge badge--muted">From: Business Analyst</span>
          </div>

          {{USER_STORY_CARDS}}
        </section>

        <!-- ==================== ARCHITECTURE ==================== -->
        <section id="architecture" class="section">
          <div class="section-header">
            <div class="section-title">
              <span class="section-icon">üèóÔ∏è</span>
              <h2>System Architecture</h2>
            </div>
            <span class="badge badge--muted">From: Solution Architect</span>
          </div>

          <div class="content-block always-open">
            <div class="content-block-body">
              <div class="content-subsection">
                <div class="content-subsection-label">Architecture Overview</div>
                <div class="content-subsection-text">{{ARCHITECTURE_OVERVIEW}}</div>
              </div>
              <div class="content-subsection">
                <div class="content-subsection-label">Technology Stack</div>
                <div class="content-subsection-text">{{TECH_STACK}}</div>
              </div>
            </div>
          </div>

          <div class="diagram-container">
            <div class="diagram-header">
              <span class="diagram-title">System Architecture Diagram</span>
              <span class="diagram-source">Solution Architect</span>
            </div>
            <div class="diagram-body">
              <pre class="mermaid">{{ARCHITECTURE_DIAGRAM}}</pre>
            </div>
          </div>
        </section>

        <!-- ==================== ADR DECISIONS ==================== -->
        <section id="decisions" class="section">
          <div class="section-header">
            <div class="section-title">
              <span class="section-icon">‚öñÔ∏è</span>
              <h2>Architecture Decision Records</h2>
            </div>
            <span class="badge badge--muted">From: Solution Architect</span>
          </div>

          {{ADR_CARDS}}
        </section>

        <!-- ==================== DATA MODEL ==================== -->
        <section id="data-model" class="section">
          <div class="section-header">
            <div class="section-title">
              <span class="section-icon">üóÑÔ∏è</span>
              <h2>Data Model</h2>
            </div>
            <span class="badge badge--muted">From: Data Architect</span>
          </div>

          <div class="content-block always-open">
            <div class="content-block-body">
              <div class="content-subsection">
                <div class="content-subsection-label">Data Model Overview</div>
                <div class="content-subsection-text">{{DATA_MODEL_OVERVIEW}}</div>
              </div>
            </div>
          </div>

          <div class="diagram-container">
            <div class="diagram-header">
              <span class="diagram-title">Entity Relationship Diagram</span>
              <span class="diagram-source">Data Architect</span>
            </div>
            <div class="diagram-body">
              <pre class="mermaid">{{DATA_MODEL_DIAGRAM}}</pre>
            </div>
          </div>
        </section>

        <!-- ==================== API DESIGN ==================== -->
        <section id="api" class="section">
          <div class="section-header">
            <div class="section-title">
              <span class="section-icon">üîå</span>
              <h2>API Design</h2>
            </div>
            <span class="badge badge--muted">From: API Designer</span>
          </div>

          <div class="content-block always-open">
            <div class="content-block-body">
              <div class="content-subsection">
                <div class="content-subsection-label">API Overview</div>
                <div class="content-subsection-text">{{API_OVERVIEW}}</div>
              </div>
              <div class="content-subsection">
                <div class="content-subsection-label">Endpoints Summary</div>
                <div class="content-subsection-text">{{API_ENDPOINTS}}</div>
              </div>
            </div>
          </div>
        </section>

        <!-- ==================== USER FLOWS ==================== -->
        <section id="user-flows" class="section">
          <div class="section-header">
            <div class="section-title">
              <span class="section-icon">üîÄ</span>
              <h2>User Flows</h2>
            </div>
            <span class="badge badge--muted">From: UX Designer</span>
          </div>

          <div class="content-block always-open">
            <div class="content-block-body">
              <div class="content-subsection">
                <div class="content-subsection-label">Key User Flows</div>
                <div class="content-subsection-text">{{USER_FLOWS_DESCRIPTION}}</div>
              </div>
            </div>
          </div>

          <div class="diagram-container">
            <div class="diagram-header">
              <span class="diagram-title">Primary User Flow</span>
              <span class="diagram-source">UX Designer</span>
            </div>
            <div class="diagram-body">
              <pre class="mermaid">{{USER_FLOW_DIAGRAM}}</pre>
            </div>
          </div>
        </section>

        <!-- ==================== WIREFRAMES ==================== -->
        <section id="wireframes" class="section">
          <div class="section-header">
            <div class="section-title">
              <span class="section-icon">üìê</span>
              <h2>Wireframes</h2>
            </div>
            <span class="badge badge--muted">From: UX Designer</span>
          </div>

          <div class="wireframe-grid">
            {{WIREFRAME_CARDS}}
          </div>
        </section>

        <!-- ==================== UI SPECIFICATIONS ==================== -->
        <section id="ui-specs" class="section">
          <div class="section-header">
            <div class="section-title">
              <span class="section-icon">üé®</span>
              <h2>UI Specifications</h2>
            </div>
            <span class="badge badge--muted">From: UI Designer</span>
          </div>

          <div class="content-block always-open">
            <div class="content-block-body">
              <div class="content-subsection">
                <div class="content-subsection-label">Design System</div>
                <div class="content-subsection-text">{{DESIGN_SYSTEM}}</div>
              </div>
              <div class="content-subsection">
                <div class="content-subsection-label">Color Palette</div>
                <div class="content-subsection-text">{{COLOR_PALETTE}}</div>
              </div>
              <div class="content-subsection">
                <div class="content-subsection-label">Typography</div>
                <div class="content-subsection-text">{{TYPOGRAPHY}}</div>
              </div>
              <div class="content-subsection">
                <div class="content-subsection-label">Component Library</div>
                <div class="content-subsection-text">{{COMPONENT_LIBRARY}}</div>
              </div>
            </div>
          </div>
        </section>

        <!-- ==================== TEST PLAN ==================== -->
        <section id="test-plan" class="section">
          <div class="section-header">
            <div class="section-title">
              <span class="section-icon">üß™</span>
              <h2>Test Plan</h2>
            </div>
            <span class="badge badge--muted">From: QA Engineer</span>
          </div>

          <div class="content-block always-open">
            <div class="content-block-body">
              <div class="content-subsection">
                <div class="content-subsection-label">Test Strategy</div>
                <div class="content-subsection-text">{{TEST_STRATEGY}}</div>
              </div>
              <div class="content-subsection">
                <div class="content-subsection-label">Test Coverage</div>
                <div class="content-subsection-text">{{TEST_COVERAGE}}</div>
              </div>
              <div class="content-subsection">
                <div class="content-subsection-label">Test Cases Summary</div>
                <div class="content-subsection-text">{{TEST_CASES_SUMMARY}}</div>
              </div>
            </div>
          </div>
        </section>

        <!-- ==================== DEFECTS ==================== -->
        <section id="defects" class="section">
          <div class="section-header">
            <div class="section-title">
              <span class="section-icon">üêõ</span>
              <h2>Defect Log</h2>
            </div>
            <span class="badge badge--muted">From: QA Engineer</span>
          </div>

          <div class="card">
            <div class="card-body" style="overflow-x: auto;">
              <table class="defect-table">
                <thead>
                  <tr>
                    <th>ID</th>
                    <th>Title</th>
                    <th>Severity</th>
                    <th>Status</th>
                    <th>Requirement</th>
                  </tr>
                </thead>
                <tbody>
                  {{DEFECT_ROWS}}
                </tbody>
              </table>
            </div>
          </div>
        </section>

        <!-- ==================== SECURITY ==================== -->
        <section id="security" class="section">
          <div class="section-header">
            <div class="section-title">
              <span class="section-icon">üîí</span>
              <h2>Security Review</h2>
            </div>
            <span class="badge badge--muted">From: Security Engineer</span>
          </div>

          <div class="content-block always-open">
            <div class="content-block-body">
              <div class="content-subsection">
                <div class="content-subsection-label">Security Assessment</div>
                <div class="content-subsection-text">{{SECURITY_ASSESSMENT}}</div>
              </div>
              <div class="content-subsection">
                <div class="content-subsection-label">Vulnerabilities Found</div>
                <div class="content-subsection-text">{{VULNERABILITIES}}</div>
              </div>
              <div class="content-subsection">
                <div class="content-subsection-label">Recommendations</div>
                <div class="content-subsection-text">{{SECURITY_RECOMMENDATIONS}}</div>
              </div>
            </div>
          </div>
        </section>

        <!-- ==================== BAT ==================== -->
        <section id="bat" class="section">
          <div class="section-header">
            <div class="section-title">
              <span class="section-icon">‚úÖ</span>
              <h2>Business Acceptance Testing</h2>
            </div>
            <span class="badge badge--muted">From: Business Analyst</span>
          </div>

          <div class="content-block always-open">
            <div class="content-block-body">
              <div class="content-subsection">
                <div class="content-subsection-label">Recommendation</div>
                <div class="content-subsection-text">{{BAT_RECOMMENDATION}}</div>
              </div>
              <div class="content-subsection">
                <div class="content-subsection-label">First Impressions</div>
                <div class="content-subsection-text">{{BAT_FIRST_IMPRESSIONS}}</div>
              </div>
              <div class="content-subsection">
                <div class="content-subsection-label">User Story Validation Summary</div>
                <div class="content-subsection-text">{{BAT_US_VALIDATION}}</div>
              </div>
              <div class="content-subsection">
                <div class="content-subsection-label">Problem-Solution Fit</div>
                <div class="content-subsection-text">{{BAT_PROBLEM_FIT}}</div>
              </div>
            </div>
          </div>
        </section>

        <!-- ==================== QUALITY GATES ==================== -->
        <section id="gates" class="section">
          <div class="section-header">
            <div class="section-title">
              <span class="section-icon">üö¶</span>
              <h2>Quality Gates</h2>
            </div>
          </div>

          <div class="card">
            <div class="card-body">
              {{GATE_STATUS_LIST}}
            </div>
          </div>
        </section>

      </div>

      <!-- Footer -->
      <footer class="chronicle-footer">
        <div class="footer-content">
          <div class="footer-meta">
            <span>Generated: {{GENERATION_DATETIME}}</span>
            <span>Schema: v2.0</span>
            <span>Generator: project-chronicler</span>
          </div>
          <div class="footer-brand">
            <span>üìú</span>
            <span>Project Chronicle</span>
          </div>
        </div>
      </footer>
    </main>
  </div>

  <!-- ========================================
       JAVASCRIPT
       ======================================== -->
  <script>
    // Initialize Mermaid
    mermaid.initialize({
      startOnLoad: true,
      theme: 'dark',
      themeVariables: {
        primaryColor: '#3b82f6',
        primaryTextColor: '#f1f5f9',
        primaryBorderColor: '#475569',
        lineColor: '#64748b',
        secondaryColor: '#1e293b',
        tertiaryColor: '#334155',
        background: '#0f172a',
        mainBkg: '#1e293b',
        fontFamily: 'IBM Plex Sans, system-ui, sans-serif'
      },
      flowchart: { useMaxWidth: true, htmlLabels: true, curve: 'basis' },
      sequence: { useMaxWidth: true },
      er: { useMaxWidth: true }
    });

    // Theme Toggle
    const themeToggle = document.getElementById('theme-toggle');
    const themeIcon = document.getElementById('theme-icon');
    const html = document.documentElement;

    const savedTheme = localStorage.getItem('chronicle-theme') || 'dark';
    html.setAttribute('data-theme', savedTheme);
    updateThemeIcon(savedTheme);

    themeToggle.addEventListener('click', () => {
      const currentTheme = html.getAttribute('data-theme');
      const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
      html.setAttribute('data-theme', newTheme);
      localStorage.setItem('chronicle-theme', newTheme);
      updateThemeIcon(newTheme);
      updateMermaidTheme(newTheme);
    });

    function updateThemeIcon(theme) {
      themeIcon.textContent = theme === 'dark' ? 'üåô' : '‚òÄÔ∏è';
    }

    function updateMermaidTheme(theme) {
      const isDark = theme === 'dark';
      mermaid.initialize({
        startOnLoad: false,
        theme: isDark ? 'dark' : 'default',
        themeVariables: isDark ? {
          primaryColor: '#3b82f6',
          primaryTextColor: '#f1f5f9',
          primaryBorderColor: '#475569',
          lineColor: '#64748b',
          background: '#0f172a',
          mainBkg: '#1e293b'
        } : {
          primaryColor: '#3b82f6',
          primaryTextColor: '#0f172a',
          primaryBorderColor: '#cbd5e1',
          lineColor: '#64748b',
          background: '#ffffff',
          mainBkg: '#f8fafc'
        }
      });

      document.querySelectorAll('.mermaid').forEach(el => {
        const code = el.getAttribute('data-original') || el.textContent;
        el.setAttribute('data-original', code);
        el.removeAttribute('data-processed');
        el.innerHTML = code;
      });
      mermaid.init(undefined, '.mermaid');
    }

    // Sidebar Navigation
    const navItems = document.querySelectorAll('.nav-item');
    const sections = document.querySelectorAll('.section');
    const currentSectionEl = document.getElementById('current-section');

    const observerOptions = {
      root: null,
      rootMargin: '-20% 0px -70% 0px',
      threshold: 0
    };

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const id = entry.target.getAttribute('id');
          navItems.forEach(item => {
            item.classList.remove('active');
            if (item.getAttribute('href') === `#${id}`) {
              item.classList.add('active');
              currentSectionEl.textContent = item.textContent.trim();
            }
          });
        }
      });
    }, observerOptions);

    sections.forEach(section => observer.observe(section));

    // Smooth scroll navigation
    navItems.forEach(item => {
      item.addEventListener('click', (e) => {
        e.preventDefault();
        const target = document.querySelector(item.getAttribute('href'));
        if (target) {
          target.scrollIntoView({ behavior: 'smooth' });
        }
        // Close sidebar on mobile
        document.getElementById('sidebar').classList.remove('open');
      });
    });

    // Collapsible blocks
    document.querySelectorAll('.content-block-header').forEach(header => {
      header.addEventListener('click', () => {
        const block = header.closest('.content-block');
        if (!block.classList.contains('always-open')) {
          block.classList.toggle('expanded');
        }
      });
    });

    document.querySelectorAll('.adr-header').forEach(header => {
      header.addEventListener('click', () => {
        header.closest('.adr-card').classList.toggle('expanded');
      });
    });

    document.querySelectorAll('.user-story-header').forEach(header => {
      header.addEventListener('click', () => {
        header.closest('.user-story').classList.toggle('expanded');
      });
    });

    // Mobile sidebar toggle
    function toggleSidebar() {
      document.getElementById('sidebar').classList.toggle('open');
    }
  </script>
</body>
</html>
